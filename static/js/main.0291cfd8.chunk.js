(this.webpackJsonpcountryfinder=this.webpackJsonpcountryfinder||[]).push([[0],{108:function(e,t,n){},109:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n(0),r=n(32),s=n.n(r),l=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,118)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))},i=n(12),o=new i.ApolloClient({uri:"https://countries-274616.ew.r.appspot.com",cache:new i.InMemoryCache}),d=function(e){var t=e.children;return Object(a.jsx)(i.ApolloProvider,{client:o,children:t})},m=function(e){var t=e.children;return Object(a.jsx)(d,{children:t})},u=n(28),j=n(11),b=function(e){var t=e.icon,n=e.label,c=e.value,r=e.className,s=void 0===r?"":r;return Object(a.jsxs)("div",{className:"flex mb-8 ".concat(s),"data-testid":"ListItem",children:[Object(a.jsx)("div",{className:"flex-shrink-0",children:Object(a.jsx)("div",{className:"flex items-center justify-center h-12 w-12 rounded-md bg-indigo-500 text-white",children:t})}),Object(a.jsxs)("div",{className:"ml-4",children:[Object(a.jsx)("dt",{className:"text-lg leading-6 font-medium text-gray-900",children:n}),Object(a.jsx)("dd",{className:"mt-2 text-base text-gray-500",children:c})]})]})},x=function(e){var t=e.preTitle,n=e.title,c=e.img;return Object(a.jsxs)("div",{className:"lg:text-center md:w-1/2","data-testid":"CountryInfo",children:[Object(a.jsx)("p",{className:"text-base text-indigo-600 font-semibold tracking-wide uppercase",children:t}),Object(a.jsx)("h2",{className:"mt-2 text-3xl leading-8 font-extrabold tracking-tight text-gray-900 sm:text-4xl",children:n}),Object(a.jsx)("div",{className:"mt-4 max-w-2xl lg:mx-auto",children:Object(a.jsx)("img",{className:"max-w-xs w-full lg:mx-auto shadow",src:c,alt:"".concat(n)})})]})},g=n(30);function h(){var e=Object(g.a)(["\n  fragment countryBasicFields on Country {\n    _id\n    alpha2Code\n    capital\n    name\n    officialLanguages {\n      name\n    }\n    flag {\n      svgFile\n    }\n    currencies {\n      name\n      symbol\n    }\n    subregion {\n      region {\n        name\n      }\n    }\n    callingCodes {\n      name\n    }\n    population\n  }\n"]);return h=function(){return e},e}var f=Object(i.gql)(h());function p(){var e=Object(g.a)(["\n  query countryQuery($alpha2Code: String) {\n    Country(alpha2Code: $alpha2Code) {\n      ...countryBasicFields\n      demonym\n      callingCodes {\n        name\n      }\n      population\n    }\n  }\n\n  ","\n"]);return p=function(){return e},e}var O=Object(i.gql)(p(),f);var v=function(e){var t,n,a,c,r,s=null===e||void 0===e?void 0:e.officialLanguages.map((function(e){return e.name})).join(", "),l=null===e||void 0===e?void 0:e.currencies.map((function(e){return"".concat(e.name," ").concat("null"!==e.symbol?"(".concat(e.symbol,")"):"")})).join(", "),i=null===e||void 0===e||null===(t=e.callingCodes)||void 0===t?void 0:t.map((function(e){return"+".concat(e.name)})).join(", ");return{id:null===e||void 0===e?void 0:e._id,name:null===e||void 0===e?void 0:e.name,flag:null===e||void 0===e||null===(n=e.flag)||void 0===n?void 0:n.svgFile,alpha2Code:null===e||void 0===e?void 0:e.alpha2Code,capital:null===e||void 0===e?void 0:e.capital,languages:s,currencies:l,region:null===e||void 0===e||null===(a=e.subregion)||void 0===a||null===(c=a.region)||void 0===c?void 0:c.name,demonym:(null===e||void 0===e?void 0:e.demonym)||"",callingCodes:i||"",population:(null===e||void 0===e?void 0:e.population)?(r=null===e||void 0===e?void 0:e.population,r.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")):""}};var y=function(e){var t=Object(i.useQuery)(O,{variables:{alpha2Code:e}}),n=t.loading,a=t.error,r=t.data,s=t.refetch;return{loading:n,error:a,country:Object(c.useMemo)((function(){return r?v(r.Country[0]):null}),[r]),refetch:s}},N=n(112),C=n(113),w=n(114),_=n(115),I=n(116),R=n(117),S=function(e){var t=e.className,n=void 0===t?"":t;return Object(a.jsx)("div",{className:"animate-pulse rounded-md bg-gray-200 ".concat(n),"data-testid":"Placeholder"})},k=function(){return Object(a.jsx)("div",{className:"py-12 bg-white mt-16","data-testid":"LoadingCountry",children:Object(a.jsxs)("div",{className:"max-w-7xl mx-auto md:flex items-center",children:[Object(a.jsx)(S,{className:"md:w-1/2 h-96 mx-4 sm:mx-6 lg:mx-8 mb-8"}),Object(a.jsx)(S,{className:"md:w-1/2 h-96 mx-4 sm:mx-6 lg:mx-8 mb-8"})]})})},L=n.p+"static/media/no-search-results-icon.67119f84.svg",F="/",$="/:alphaCode",B=function(){return Object(a.jsx)("div",{className:"py-12 bg-white mt-16","data-testid":"EmptyCountry",children:Object(a.jsxs)("div",{className:"max-w-7xl mx-auto md:flex items-center",children:[Object(a.jsx)("div",{className:"md:w-1/2 sm:mx-6 lg:mx-8 mb-8 flex justify-center",children:Object(a.jsxs)("p",{className:"mb-16 text-gray-900 text-center my-8 text-lg max-w-xs",children:["No tenemos informaci\xf3n disponible del pa\xeds solicitado."," ",Object(a.jsx)(u.b,{to:F,className:"text-indigo-600 hover:text-indigo-800 font-medium",children:"Buscar otro pa\xeds"})]})}),Object(a.jsx)("div",{className:"md:w-1/2 sm:mx-6 lg:mx-8 mb-8",children:Object(a.jsx)("img",{src:L,alt:"No tenemos informaci\xf3n disponible del pa\xeds solicitado",className:"max-w-sm w-full mx-auto"})})]})})},P=function(e){var t=e.countryName,n=e.className,c=void 0===n?"":n;return Object(a.jsx)("iframe",{"data-testid":"CountryMap",className:"bg-gray-200 ".concat(c),title:t,frameBorder:"0",style:{border:0},src:"https://www.google.com/maps/embed/v1/place?key=".concat("AIzaSyAnBf7kIy7wjYEr9z05HqVmku2Dv_XjjDU","&q=").concat(t),allowFullScreen:!0})},M=function(){var e=Object(j.g)().alphaCode,t=y(e),n=t.loading,c=t.error,r=t.country;return n?Object(a.jsx)(k,{}):c||!r?Object(a.jsx)(B,{}):Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:"py-12 bg-white my-8",children:Object(a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 md:flex items-center",children:[Object(a.jsx)(x,{preTitle:r.region,title:r.name,img:r.flag}),Object(a.jsx)("div",{className:"md:w-1/2 md:flex md:justify-center md:items-center md:border-l md:border-gray-400 mt-12 md:mt-0",children:Object(a.jsxs)("dl",{className:"md:flex md:flex-col",children:[Object(a.jsx)(b,{className:"mb-8",icon:Object(a.jsx)(N.a,{}),label:"Capital",value:r.capital}),Object(a.jsx)(b,{className:"mb-8",icon:Object(a.jsx)(C.a,{}),label:"Idioma(s)",value:r.languages}),Object(a.jsx)(b,{className:"mb-8",icon:Object(a.jsx)(w.a,{}),label:"Moneda(s)",value:r.currencies}),Object(a.jsx)(b,{className:"mb-8",icon:Object(a.jsx)(_.a,{}),label:"Nacionalidad",value:r.demonym}),Object(a.jsx)(b,{className:"mb-8",icon:Object(a.jsx)(I.a,{}),label:"Poblaci\xf3n",value:r.population}),Object(a.jsx)(b,{className:"mb-8",icon:Object(a.jsx)(R.a,{}),label:"Prefijo telef\xf3nico",value:r.callingCodes})]})})]})}),Object(a.jsx)(P,{className:"w-full h-96",countryName:r.name})]})},D=n(31),A=n(25),q={solid:"border-transparent bg-indigo-600 hover:bg-indigo-700 text-white",outline:"border-indigo-600 bg-white hover:bg-indigo-50 text-indigo-600"},T=function(e){var t=e.children,n=e.variant,c=void 0===n?"solid":n,r=e.onClick,s=e.type,l=void 0===s?"button":s,i=q[c]||q.solid;return Object(a.jsx)("button",{className:"flex-none inline-flex focus:outline-none items-center justify-center px-3 py-2 border text-sm font-medium rounded-md ".concat(i),onClick:r,type:l,children:t})},E=function(e){var t=e.autoComplete,n=void 0===t?"":t,c=e.placeholder,r=void 0===c?"":c,s=e.name,l=void 0===s?"":s,i=e.onInput,o=e.value;return Object(a.jsx)("input",{type:"text",name:l,onInput:i,autoComplete:n,placeholder:r,className:"p-2 px-3 leading-3 text-gray-900 focus:border-indigo-500 block w-full sm:text-md border-2 border-gray-300 rounded-md focus:outline-none",value:o})},Q=function(e){var t=e.onSubmit,n=Object(c.useState)(""),r=Object(A.a)(n,2),s=r[0],l=r[1];return Object(a.jsxs)("div",{className:"px-4 md:px-8 md:text-center my-4 md:mt-24 md:mb-20","data-testid":"SearchForm",children:[Object(a.jsx)("p",{className:"mt-2 text-3xl leading-8 font-extrabold tracking-tight text-gray-900 sm:text-4xl",children:"\xbfQu\xe9 pa\xeds estas buscando?"}),Object(a.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t&&t(s)},className:"mt-6 max-w-2xl md:mx-auto flex items-center",children:[Object(a.jsx)("div",{className:"flex-auto mr-4",children:Object(a.jsx)(E,{value:s,name:"search",placeholder:"Escribe un pa\xeds(en ingl\xe9s) o un alpha2code",autoComplete:"searchCountry",onInput:function(e){l(e.target.value)}})}),Object(a.jsx)(T,{type:"submit",children:"BUSCAR"})]})]})},U=n(45),H=n(47);function z(){var e=Object(g.a)(['\n  query {\n    Language(orderBy: name_asc, filter: { name_not: "null" }) {\n      _id\n      name\n    }\n\n    Currency(orderBy: name_asc, filter: { name_not: "null" }) {\n      _id\n      name\n    }\n\n    Region(orderBy: name_asc, filter: { name_not: "null" }) {\n      _id\n      name\n    }\n  }\n']);return z=function(){return e},e}var J=Object(i.gql)(z());var V=function(){var e=Object(i.useQuery)(J,{}),t=e.loading,n=e.error,a=e.data,r=e.refetch,s=function(e){return e.map((function(e){return{value:e.name,label:e.name}}))},l=Object(c.useMemo)((function(){return a?{currencyOptions:s(a.Currency),languageOptions:s(a.Language),regionOptions:s(a.Region)}:{currencyOptions:[],languageOptions:[],regionOptions:[]}}),[a]);return{loading:t,error:n,currencyOptions:l.currencyOptions,languageOptions:l.languageOptions,regionOptions:l.regionOptions,refetch:r}},Y=function(e){var t=e.children,n=e.title;return Object(a.jsx)("aside",{className:"md:w-80 md:pr-4 flex-none pb-8","data-testid":"Sidebar",children:Object(a.jsxs)("div",{className:"bg-white shadow sm:rounded-lg p-4",children:[Object(a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:n}),t]})})},X=function(e){var t=e.onChange,n="Filtrar",r=V(),s=r.currencyOptions,l=r.languageOptions,i=r.regionOptions,o=r.loading,d=r.error,m=r.refetch,u=Object(c.useState)({language:null,currency:null,region:null}),j=Object(A.a)(u,2),b=j[0],x=j[1],g=function(e){return function(n){var a=Object(D.a)(Object(D.a)({},b),{},Object(U.a)({},e,(null===n||void 0===n?void 0:n.value)||null));x(a),t&&t(a)}};return d?Object(a.jsxs)(Y,{title:n,children:[Object(a.jsx)("p",{className:"mb-4",children:"Ha ocurrido un error al cargar los filtros por favor intente nuevamente"}),Object(a.jsx)(T,{onClick:function(){return m()},children:"Reintentar"})]}):o?Object(a.jsxs)(Y,{title:n,children:[Object(a.jsx)(S,{className:"mb-4 h-8"}),Object(a.jsx)(S,{className:"mb-4 h-8"}),Object(a.jsx)(S,{className:"mb-4 h-8"})]}):Object(a.jsxs)(Y,{title:n,children:[Object(a.jsx)(H.a,{className:"mb-4",options:i,placeholder:"Por regi\xf3n",onChange:g("region"),isClearable:!0}),Object(a.jsx)(H.a,{className:"mb-4",options:l,placeholder:"Por idioma",onChange:g("language"),isClearable:!0}),Object(a.jsx)(H.a,{className:"mb-4",options:s,placeholder:"Por moneda",onChange:g("currency"),isClearable:!0})]})},G=n(56);function K(){var e=Object(g.a)(['\n  query searchCountriesQuery(\n    $alpha2Code: String\n    $name: String\n    $filter: [_CountryFilter!]\n    $offset: Int\n  ) {\n    totalResults: Country(\n      filter: {\n        name_not: "null"\n        OR: [\n          { alpha2Code_contains: $alpha2Code, AND: $filter }\n          { name_starts_with: $name, AND: $filter }\n        ]\n      }\n    ) {\n      _id\n    }\n\n    Country(\n      filter: {\n        name_not: "null"\n        OR: [\n          { alpha2Code_contains: $alpha2Code, AND: $filter }\n          { name_starts_with: $name, AND: $filter }\n        ]\n      }\n      orderBy: name_asc\n      offset: $offset\n      first: 20\n    ) {\n      ...countryBasicFields\n    }\n  }\n\n  ',"\n"]);return K=function(){return e},e}var W=Object(i.gql)(K(),f);var Z=function(e){var t=Object(c.useState)(!1),n=Object(A.a)(t,2),a=n[0],r=n[1],s=Object(c.useState)(!0),l=Object(A.a)(s,2),o=l[0],d=l[1],m=function(e){var t=e.search.toUpperCase(),n=(c=e.search,c.charAt(0).toUpperCase()+c.slice(1).toLowerCase()),a=[];var c;e.currency&&a.push({currencies_single:{name:e.currency}});e.language&&a.push({officialLanguages_single:{name:e.language}});e.region&&a.push({subregion:{region:{name:e.region}}});return a.length?{alpha2Code:t,name:n,filter:a,offset:0}:{alpha2Code:t,name:n,offset:0}}(e),u=Object(i.useQuery)(W,{variables:m,onCompleted:function(){return d(!0)}}),j=u.loading,b=u.error,x=u.data,g=u.refetch,h=u.fetchMore,f=Object(c.useMemo)((function(){return x?x.Country.map((function(e){return v(e)})):null}),[x]),p=(null===x||void 0===x?void 0:x.totalResults.length)||0,O=(null===f||void 0===f?void 0:f.length)||0;return{loading:j,error:b,refetch:g,countries:f,totalResults:p,isEmpty:0===p,loadNextPage:function(){r(!0),h({variables:{offset:O},updateQuery:function(e,t){var n=e,a=t.fetchMoreResult;return r(!1),d(!!a.Country.length),a.Country=[].concat(Object(G.a)(n.Country),Object(G.a)(a.Country)),a}})},loadingMore:a,hasNextPage:o,showingResults:O}},ee=function(e){var t=e.title,n=e.supText,c=e.titleImg,r=e.descriptionList,s=e.className,l=e.onClick;return Object(a.jsxs)("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg ".concat(s),"data-testid":"DescriptionCard",children:[Object(a.jsxs)("div",{className:"px-4 py-5 sm:px-6 flex items-center justify-start",children:[Object(a.jsxs)("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:[t," ",Object(a.jsx)("sup",{children:n})]}),Object(a.jsx)("div",{className:"flex-none mx-4",children:Object(a.jsx)("img",{className:"w-10 shadow",src:c,alt:"bandera de ".concat(t)})}),Object(a.jsx)("div",{className:"ml-auto",children:Object(a.jsx)(T,{variant:"outline",onClick:l,children:"Ver detalle"})})]}),Object(a.jsx)("div",{className:"border-t border-gray-200",children:Object(a.jsx)("dl",{children:r.map((function(e,t){var n,c=e.label,r=e.value;return Object(a.jsxs)("div",{className:"px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6 ".concat((n=t,n%2===0?"bg-gray-50":"bg-white")),"data-testid":"DescriptionCard__ListItem",children:[Object(a.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:c}),Object(a.jsx)("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2",children:r})]},"descriptionListItem-".concat(r))}))})})]})},te=n(76),ne=function(e){var t=e.filters,n=Z(t),c=n.loading,r=n.error,s=n.countries,l=n.refetch,i=n.totalResults,o=n.isEmpty,d=n.loadNextPage,m=n.loadingMore,u=n.hasNextPage,b=n.showingResults,x=Object(j.f)(),g=Object(te.a)({loading:m,hasNextPage:u,onLoadMore:d});if(r)return Object(a.jsxs)("div",{className:"flex-auto md:pl-4",children:[Object(a.jsx)("p",{className:"mb-4 text-gray-900",children:"Ha ocurrido un error al cargar los pa\xedses por favor intente nuevamente"}),Object(a.jsx)(T,{onClick:function(){return l()},children:"Reintentar"})]});if(c)return Object(a.jsxs)("div",{className:"flex-auto md:pl-4",children:[Object(a.jsx)(S,{className:"h-72 mb-8"}),Object(a.jsx)(S,{className:"h-72 mb-8"}),Object(a.jsx)(S,{className:"h-72 mb-8"})]});if(o)return Object(a.jsxs)("div",{className:"flex-auto md:pl-4",children:[Object(a.jsx)("p",{className:"mb-16 text-gray-900 text-center my-8 text-lg",children:"No se encontraron resultados :("}),Object(a.jsx)("img",{src:L,alt:"No se encontraron resultados",className:"max-w-sm w-full mx-auto"})]});var h=i>1;return Object(a.jsxs)("div",{className:"flex-auto md:pl-4 relative",children:[Object(a.jsxs)("div",{className:"my-4 text-sm text-gray-900 md:absolute left-0 top-0 ml-6 md:-mt-8",children:["Mostrando ",b," de"," ",Object(a.jsxs)("strong",{children:[i," resultado",h?"s":""]})]}),Object(a.jsxs)("div",{ref:g,children:[null===s||void 0===s?void 0:s.map((function(e){var t,n=e.name,c=e.flag,r=e.alpha2Code,s=e.capital,l=e.languages,i=e.currencies,o=e.region,d=e.id;return Object(a.jsx)(ee,{className:"mb-8",title:n,titleImg:c,supText:r,onClick:(t=r,function(){x.push("/".concat(t))}),descriptionList:[{label:"Capital",value:s},{label:"Idioma(s)",value:l},{label:"Moneda(s)",value:i},{label:"Regi\xf3n",value:o}]},"DescriptionCard-".concat(d))})),m&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(S,{className:"h-72 mb-8"}),Object(a.jsx)(S,{className:"h-72 mb-8"}),Object(a.jsx)(S,{className:"h-72 mb-8"})]})]})]})},ae=function(){var e=Object(c.useState)({search:"",language:null,currency:null,region:null}),t=Object(A.a)(e,2),n=t[0],r=t[1];return Object(a.jsxs)("div",{children:[Object(a.jsx)(Q,{onSubmit:function(e){r((function(t){return Object(D.a)(Object(D.a)({},t),{},{search:e})}))}}),Object(a.jsxs)("div",{className:"md:flex",children:[Object(a.jsx)(X,{onChange:function(e){r((function(t){return Object(D.a)(Object(D.a)({},t),e)}))}}),Object(a.jsx)(ne,{filters:n})]})]})},ce=function(e){var t=e.children;return Object(a.jsxs)("div",{className:"min-h-screen flex flex-col","data-testid":"Layout",children:[Object(a.jsx)("header",{className:"bg-white px-4 md:px-8 py-4 flex-none border-b boder-gray-400",children:Object(a.jsx)("div",{className:"max-w-7xl mx-auto",children:Object(a.jsx)(u.b,{to:F,className:"font-extrabold text-gray-900 text-xl hover:text-indigo-600",children:"COUNTRYFINDER"})})}),Object(a.jsx)("div",{className:"md:px-8 flex-auto",children:Object(a.jsx)("div",{className:"max-w-7xl mx-auto w-full",children:t})}),Object(a.jsx)("footer",{className:"flex-none border-t border-gray-400 text-gray-900 text-center py-4 mt-16",children:"Hecho por Renzo Telenta"})]})},re=function(){return Object(a.jsx)(u.a,{basename:"/",children:Object(a.jsx)(ce,{children:Object(a.jsxs)(j.c,{children:[Object(a.jsx)(j.a,{exact:!0,path:F,component:ae}),Object(a.jsx)(j.a,{path:$,component:M})]})})})};n(108);s.a.render(Object(a.jsx)(m,{children:Object(a.jsx)(re,{})}),document.getElementById("root")),l()}},[[109,1,2]]]);
//# sourceMappingURL=main.0291cfd8.chunk.js.map